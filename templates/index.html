{% extends 'base.html' %}
{% block content %}
<div class="row g-0" style="height: calc(100vh - 140px);">
  <div class="col-12 col-lg-9 p-0 h-100 position-relative">
    <div id="map" class="h-100 w-100"></div>
    <button class="btn btn-success fab" id="togglePanel">➕ Registrar buraco</button>
  </div>

  <aside class="col-12 col-lg-3 h-100 border-start bg-white p-3 sidebar collapsed" id="sidebar">
    <h5 class="mb-3">Novo Registro</h5>
    <form id="regForm" enctype="multipart/form-data">
      <div class="mb-2">
        <label class="form-label">Tipo</label>
        <select name="kind" class="form-select">
          <option>Buraco</option>
          <option>Cratera</option>
          <option>Desnível</option>
          <option>Tampa solta</option>
        </select>
      </div>
      <div class="mb-2">
        <label class="form-label">Título</label>
        <input name="title" class="form-control" placeholder="Ex: Buraco profundo na Av. X" required>
      </div>
      <div class="mb-2">
        <label class="form-label">Descrição</label>
        <textarea name="description" class="form-control" rows="3" placeholder="Detalhes úteis (profundidade, risco, referência visual)..."></textarea>
      </div>
      <div class="row">
        <div class="col-6 mb-2">
          <label class="form-label">Latitude</label>
          <input id="lat" name="lat" class="form-control" placeholder="Clique no mapa">
        </div>
        <div class="col-6 mb-2">
          <label class="form-label">Longitude</label>
          <input id="lng" name="lng" class="form-control" placeholder="Clique no mapa">
        </div>
      </div>
      <div class="mb-2">
        <label class="form-label">Imagem (até 2 MB | JPG/PNG)</label>
        <input id="imageField" name="image" type="file" accept="image/*" class="form-control">
        <div id="preview" class="mt-2"></div>
      </div>
      <div class="d-grid gap-2">
        <button class="btn btn-primary">Registrar</button>
      </div>
    </form>
  </aside>
</div>
{% endblock %}
